Hi Pranav

Valid point. My suggestion is simple: dont use it . Scoping rules essentially kick in here, but I guess we can do without the complexity. The only place closures help are loops and coroutines (so far what i have seen).

Thanks
Indrajeet 
On March 1, 2017 at 5:30:25 AM, Pranav Maniar (pranav.maniar@gslab.com) wrote:

Hi All,

 

Recently we came across shadowing of variable in lua.

Most languages I work with does not support it. But since lua allows it, we should be aware of it to catch any bugs introduced due to this.



Stack overflow link :http://stackoverflow.com/questions/16963768/lua-two-local-variables-with-the-same-name

 

 

Code we tried is :

 

print("shadow test")

for i=1,10 do
print("- outer loop " .. i)
  for i = 1,5 do
    print("---- Inner loop ".. i) -- inner loop has access to inner loop's i variable and outer i is not modified here
  end
end


local x = 5 + 3
local function getX1()
  x=x+100
  return x
end
local x = 3 - 2
local function getX2()
  return x
end

print("x = " .. x); -- x = 1
print("x = " .. getX1()); -- x = 8
print("x = " .. getX2()); -- x = 1


 

 

 

Thanks,

Pranav
